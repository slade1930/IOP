{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen bg-gray-900 text-white overflow-hidden relative">
    <!-- Fondo de estrellas -->
    <div id="stars-container" class="fixed inset-0 z-0"></div>
    
    <!-- Nebulosas animadas -->
    <div class="fixed inset-0 z-1 opacity-30">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500 rounded-full filter blur-3xl opacity-50 animate-pulse animation-delay-1000"></div>
        <div class="absolute top-1/3 right-1/3 w-96 h-96 bg-blue-500 rounded-full filter blur-3xl opacity-30 animate-pulse animation-delay-2000"></div>
        <div class="absolute bottom-1/4 left-1/3 w-80 h-80 bg-pink-500 rounded-full filter blur-3xl opacity-40 animate-pulse"></div>
    </div>
    
    <!-- Contenido principal -->
    <div class="relative z-10 container mx-auto px-4 py-16">
        <!-- Encabezado con animaci√≥n -->
        <div class="text-center mb-16">
            <h1 class="text-5xl md:text-7xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-blue-500 animate-gradient">
                <span class="inline-block animate-float">A</span>
                <span class="inline-block animate-float animation-delay-100">y</span>
                <span class="inline-block animate-float animation-delay-200">z</span>
                <span class="inline-block animate-float animation-delay-300">e</span>
                <span class="inline-block animate-float animation-delay-400">x</span>
            </h1>
            
            <!-- Subt√≠tulo mejorado -->
            <div class="relative inline-block mt-4">
                <p class="text-xl md:text-2xl font-medium max-w-3xl mx-auto animate-fade-in bg-clip-text text-transparent bg-gradient-to-r from-blue-300 via-purple-300 to-pink-300">
                    <span class="text-stroke">Explora el poder de los m√©todos num√©ricos</span>
                    <span class="block mt-2 text-glow">en un universo interactivo</span>
                </p>
                
                <!-- Efecto de part√≠culas alrededor del texto -->
                <div class="absolute -top-4 -left-4 w-full h-full overflow-hidden pointer-events-none">
                    <div class="particle absolute w-2 h-2 bg-purple-400 rounded-full opacity-70 animate-particle-1"></div>
                    <div class="particle absolute w-1.5 h-1.5 bg-blue-400 rounded-full opacity-70 animate-particle-2"></div>
                    <div class="particle absolute w-1 h-1 bg-pink-400 rounded-full opacity-70 animate-particle-3"></div>
                </div>
            </div>
        </div>
        
        <!-- Tarjetas de m√©todos con animaciones 3D -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
            <!-- M√©todo Simplex -->
            <div class="method-card group" data-method="simplex" data-url="{% url 'list_simplex' %}">
                <div class="card-inner">
                    <div class="card-front bg-gradient-to-br from-indigo-600 to-purple-700 p-6 rounded-xl shadow-2xl flex flex-col h-full transform transition-all duration-500 group-hover:-translate-y-2">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-2xl font-bold">M√©todo Simplex</h3>
                            <span class="icon-3d text-4xl">üìä</span>
                        </div>
                        <p class="text-gray-200 flex-grow">Optimizaci√≥n lineal para encontrar la mejor soluci√≥n en problemas con restricciones.</p>
                        <div class="mt-4 text-sm text-indigo-200">Haz clic para explorar</div>
                    </div>
                    <div class="card-back absolute inset-0 bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-xl font-bold mb-3 text-indigo-300">Aplicaciones:</h3>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Optimizaci√≥n de recursos en empresas
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Planificaci√≥n de rutas de transporte
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Asignaci√≥n √≥ptima de presupuestos
                            </li>
                        </ul>
                        <a href="{% url 'list_simplex' %}" class="mt-auto btn-glow bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg inline-block text-center transition-all duration-300 transform hover:scale-105">
                            Probar calculadora
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Falsa Posici√≥n -->
            <div class="method-card group" data-method="falsa-posicion" data-url="{% url 'list_falsa_posicion' %}">
                <div class="card-inner">
                    <div class="card-front bg-gradient-to-br from-blue-600 to-teal-500 p-6 rounded-xl shadow-2xl flex flex-col h-full transform transition-all duration-500 group-hover:-translate-y-2">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-2xl font-bold">Falsa Posici√≥n</h3>
                            <span class="icon-3d text-4xl">‚öñÔ∏è</span>
                        </div>
                        <p class="text-gray-200 flex-grow">M√©todo para encontrar ra√≠ces de funciones combinando bisecci√≥n y secante.</p>
                        <div class="mt-4 text-sm text-blue-200">Haz clic para explorar</div>
                    </div>
                    <div class="card-back absolute inset-0 bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-xl font-bold mb-3 text-blue-300">Aplicaciones:</h3>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> C√°lculo de puntos de equilibrio en econom√≠a
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Determinaci√≥n de tasas de inter√©s impl√≠citas
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Soluci√≥n de ecuaciones en ingenier√≠a
                            </li>
                        </ul>
                        <a href="{% url 'list_falsa_posicion' %}" class="mt-auto btn-glow bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg inline-block text-center transition-all duration-300 transform hover:scale-105">
                            Probar calculadora
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Eliminaci√≥n Gauss -->
            <div class="method-card group" data-method="gauss" data-url="{% url 'list_gauss_eliminacion' %}">
                <div class="card-inner">
                    <div class="card-front bg-gradient-to-br from-green-600 to-emerald-500 p-6 rounded-xl shadow-2xl flex flex-col h-full transform transition-all duration-500 group-hover:-translate-y-2">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-2xl font-bold">Eliminaci√≥n Gauss</h3>
                            <span class="icon-3d text-4xl">üßÆ</span>
                        </div>
                        <p class="text-gray-200 flex-grow">Resoluci√≥n de sistemas de ecuaciones lineales mediante matrices triangulares.</p>
                        <div class="mt-4 text-sm text-green-200">Haz clic para explorar</div>
                    </div>
                    <div class="card-back absolute inset-0 bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-xl font-bold mb-3 text-green-300">Aplicaciones:</h3>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> An√°lisis de circuitos el√©ctricos
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Modelado de estructuras en ingenier√≠a civil
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Soluci√≥n de problemas de flujo de redes
                            </li>
                        </ul>
                        <a href="{% url 'list_gauss_eliminacion' %}" class="mt-auto btn-glow bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg inline-block text-center transition-all duration-300 transform hover:scale-105">
                            Probar calculadora
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Gauss-Jordan -->
            <div class="method-card group" data-method="gauss-jordan" data-url="{% url 'list_gauss_jordan' %}">
                <div class="card-inner">
                    <div class="card-front bg-gradient-to-br from-sky-600 to-cyan-500 p-6 rounded-xl shadow-2xl flex flex-col h-full transform transition-all duration-500 group-hover:-translate-y-2">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-2xl font-bold">Gauss-Jordan</h3>
                            <span class="icon-3d text-4xl">üîç</span>
                        </div>
                        <p class="text-gray-200 flex-grow">Variante de eliminaci√≥n gaussiana que produce una matriz escalonada reducida.</p>
                        <div class="mt-4 text-sm text-cyan-200">Haz clic para explorar</div>
                    </div>
                    <div class="card-back absolute inset-0 bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-xl font-bold mb-3 text-cyan-300">Aplicaciones:</h3>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> C√°lculo de matrices inversas
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Soluci√≥n de sistemas de ecuaciones lineales
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> An√°lisis de dependencia lineal
                            </li>
                        </ul>
                        <a href="{% url 'list_gauss_jordan' %}" class="mt-auto btn-glow bg-cyan-600 hover:bg-cyan-700 text-white py-2 px-4 rounded-lg inline-block text-center transition-all duration-300 transform hover:scale-105">
                            Probar calculadora
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Diferenciaci√≥n Finita -->
            <div class="method-card group" data-method="diferenciacion" data-url="{% url 'list_diferenciacion_finita' %}">
                <div class="card-inner">
                    <div class="card-front bg-gradient-to-br from-red-600 to-orange-500 p-6 rounded-xl shadow-2xl flex flex-col h-full transform transition-all duration-500 group-hover:-translate-y-2">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-2xl font-bold">Diferenciaci√≥n Finita</h3>
                            <span class="icon-3d text-4xl">üìà</span>
                        </div>
                        <p class="text-gray-200 flex-grow">Aproximaci√≥n num√©rica de derivadas usando diferencias entre puntos discretos.</p>
                        <div class="mt-4 text-sm text-orange-200">Haz clic para explorar</div>
                    </div>
                    <div class="card-back absolute inset-0 bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-xl font-bold mb-3 text-orange-300">Aplicaciones:</h3>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Simulaci√≥n de din√°mica de fluidos
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> An√°lisis de tensiones en estructuras
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Modelado de fen√≥menos f√≠sicos
                            </li>
                        </ul>
                        <a href="{% url 'list_diferenciacion_finita' %}" class="mt-auto btn-glow bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg inline-block text-center transition-all duration-300 transform hover:scale-105">
                            Probar calculadora
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Interpolaci√≥n Newton -->
            <div class="method-card group" data-method="interpolacion" data-url="{% url 'list_interpolacion_newton' %}">
                <div class="card-inner">
                    <div class="card-front bg-gradient-to-br from-yellow-600 to-amber-500 p-6 rounded-xl shadow-2xl flex flex-col h-full transform transition-all duration-500 group-hover:-translate-y-2">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-2xl font-bold">Interpolaci√≥n Newton</h3>
                            <span class="icon-3d text-4xl">‚ú®</span>
                        </div>
                        <p class="text-gray-200 flex-grow">Construcci√≥n de polinomios que pasan exactamente por un conjunto de puntos dados.</p>
                        <div class="mt-4 text-sm text-amber-200">Haz clic para explorar</div>
                    </div>
                    <div class="card-back absolute inset-0 bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-xl font-bold mb-3 text-amber-300">Aplicaciones:</h3>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Predicci√≥n de valores entre datos conocidos
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> Reconstrucci√≥n de se√±ales digitales
                            </li>
                            <li class="flex items-start">
                                <span class="mr-2">‚Ä¢</span> An√°lisis de tendencias en datos experimentales
                            </li>
                        </ul>
                        <a href="{% url 'list_interpolacion_newton' %}" class="mt-auto btn-glow bg-amber-600 hover:bg-amber-700 text-white py-2 px-4 rounded-lg inline-block text-center transition-all duration-300 transform hover:scale-105">
                            Probar calculadora
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chatbot Section -->
        <div class="bg-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-700 mb-16 transform transition-all duration-500 hover:scale-[1.01]">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/3 mb-6 md:mb-0 flex justify-center">
                    <div class="relative">
                        <div class="w-48 h-48 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center shadow-lg animate-float">
                            <div class="w-40 h-40 rounded-full bg-gray-800 flex items-center justify-center text-5xl">
                                ü§ñ
                            </div>
                        </div>
                        <div class="absolute -bottom-2 -right-2 bg-green-500 rounded-full w-12 h-12 flex items-center justify-center text-xl shadow-lg animate-pulse">
                            üí¨
                        </div>
                    </div>
                </div>
                <div class="md:w-2/3 md:pl-8">
                    <h2 class="text-3xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-blue-400">
                        Asistente de M√©todos Num√©ricos
                    </h2>
                    <p class="text-gray-300 mb-6">
                        Nuestro chatbot especializado puede responder tus dudas sobre m√©todos num√©ricos, explicarte conceptos y guiarte en el uso de las calculadoras.
                    </p>
                    <button id="open-chatbot" class="btn-glow bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-8 rounded-full font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                        Hablar con el asistente
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Informaci√≥n adicional -->
        <div class="text-center">
            <h2 class="text-3xl font-bold mb-6">¬øQu√© son los m√©todos num√©ricos?</h2>
            <div class="max-w-4xl mx-auto text-gray-300 text-lg">
                <p class="mb-6">
                    Los m√©todos num√©ricos son t√©cnicas mediante las cuales es posible formular problemas matem√°ticos de tal forma que puedan resolverse usando operaciones aritm√©ticas. Son esenciales en campos donde los modelos anal√≠ticos exactos son dif√≠ciles o imposibles de resolver.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gray-800 p-6 rounded-xl border-t-4 border-purple-500 transform transition-all duration-300 hover:translate-y-1">
                        <h3 class="font-bold text-xl mb-3 text-purple-400">Precisi√≥n</h3>
                        <p>Proporcionan soluciones aproximadas con un grado de exactitud controlable.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-xl border-t-4 border-blue-500 transform transition-all duration-300 hover:translate-y-1">
                        <h3 class="font-bold text-xl mb-3 text-blue-400">Eficiencia</h3>
                        <p>Permiten resolver problemas complejos en tiempos razonables usando computadoras.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-xl border-t-4 border-green-500 transform transition-all duration-300 hover:translate-y-1">
                        <h3 class="font-bold text-xl mb-3 text-green-400">Versatilidad</h3>
                        <p>Aplicables en ingenier√≠a, f√≠sica, econom√≠a, biolog√≠a y muchas otras √°reas.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de m√©todo -->
    <div id="method-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-70 backdrop-blur-sm"></div>
        <div class="relative bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4 shadow-2xl border border-gray-700 transform transition-all duration-300 scale-95 opacity-0">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white p-2 rounded-full bg-gray-700 hover:bg-gray-600 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div class="p-8">
                <div id="modal-content">
                    <!-- Contenido din√°mico -->
                </div>
                <div class="mt-8 text-center">
                    <a id="method-link" href="#" class="btn-glow inline-block bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-8 rounded-full font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                        Probar calculadora
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chatbot UI -->
    <div id="chatbot-ui" class="fixed bottom-8 right-8 z-50 hidden">
        <div class="bg-gray-800 rounded-2xl shadow-2xl border border-gray-700 w-96 max-h-[80vh] flex flex-col">
            <div class="bg-gradient-to-r from-purple-600 to-blue-600 p-4 rounded-t-2xl flex justify-between items-center">
                <h3 class="font-bold text-white">Asistente de Ayzex</h3>
                <button id="close-chatbot" class="text-white hover:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
            <div id="chatbot-messages" class="p-4 flex-grow overflow-y-auto max-h-[60vh] space-y-4">
                <div class="flex">
                    <div class="bg-gray-700 rounded-lg p-3 max-w-xs">
                        <p>¬°Hola! Soy el asistente de Ayzex. ¬øEn qu√© m√©todo num√©rico necesitas ayuda?</p>
                    </div>
                </div>
            </div>
            <div class="p-4 border-t border-gray-700">
                <div class="flex">
                    <input id="chatbot-input" type="text" placeholder="Escribe tu pregunta..." class="flex-grow bg-gray-700 rounded-l-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <button id="send-message" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-r-lg transition">
                        Enviar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Three.js para efectos 3D -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>

<!-- Nuestros estilos y scripts -->
<style>
    /* Animaciones personalizadas */
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }
    
    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    @keyframes pulse-glow {
        0%, 100% { box-shadow: 0 0 10px rgba(124, 58, 237, 0.5); }
        50% { box-shadow: 0 0 20px rgba(124, 58, 237, 0.8); }
    }
    
    .animate-float {
        animation: float 3s ease-in-out infinite;
    }
    
    .animation-delay-100 {
        animation-delay: 0.1s;
    }
    
    .animation-delay-200 {
        animation-delay: 0.2s;
    }
    
    .animation-delay-300 {
        animation-delay: 0.3s;
    }
    
    .animation-delay-400 {
        animation-delay: 0.4s;
    }
    
    .animate-gradient {
        background-size: 200% 200%;
        animation: gradient 8s ease infinite;
    }
    
    .animate-fade-in {
        animation: fadeIn 1.5s ease-out;
    }
    
    /* Efecto de texto con borde */
    .text-stroke {
    text-shadow: 
        -0.5px -0.5px 0 rgba(255, 255, 255, 0.3),
        0.5px -0.5px 0 rgba(255, 255, 255, 0.3),
        -0.5px 0.5px 0 rgba(255, 255, 255, 0.3),
        0.5px 0.5px 0 rgba(255, 255, 255, 0.3);
}
    
    /* Brillo suave */
    .text-glow {
        text-shadow: 0 0 10px rgba(165, 180, 252, 0.5), 
                     0 0 20px rgba(192, 132, 252, 0.3);
    }
    
    /* Animaciones de part√≠culas */
    .animate-particle-1 {
        animation: float-particle 8s ease-in-out infinite;
        top: 20%;
        left: 10%;
    }
    
    .animate-particle-2 {
        animation: float-particle 10s ease-in-out infinite reverse;
        top: 60%;
        left: 80%;
    }
    
    .animate-particle-3 {
        animation: float-particle 7s ease-in-out infinite 2s;
        top: 30%;
        left: 50%;
    }
    
    @keyframes float-particle {
        0%, 100% { transform: translate(0, 0); opacity: 0.7; }
        25% { transform: translate(20px, -10px); opacity: 0.4; }
        50% { transform: translate(10px, 15px); opacity: 0.8; }
        75% { transform: translate(-15px, 5px); opacity: 0.5; }
    }
    
    .btn-glow {
        position: relative;
        overflow: hidden;
    }
    
    .btn-glow:hover {
        box-shadow: 0 0 15px rgba(124, 58, 237, 0.7);
    }
    
    .btn-glow::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
            to bottom right,
            rgba(255, 255, 255, 0) 45%,
            rgba(255, 255, 255, 0.3) 50%,
            rgba(255, 255, 255, 0) 55%
        );
        transform: rotate(30deg);
        opacity: 0;
        transition: all 0.5s ease;
    }
    
    .btn-glow:hover::after {
        opacity: 1;
        animation: shine 1.5s infinite;
    }
    
    @keyframes shine {
        0% { left: -50%; top: -50%; }
        100% { left: 150%; top: 150%; }
    }
    
    .method-card {
        perspective: 1000px;
        height: 280px;
    }
    
    .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }
    
    .method-card:hover .card-inner {
        transform: rotateY(180deg);
    }
    
    .card-front, .card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
    }
    
    .card-back {
        transform: rotateY(180deg);
    }
    
    .icon-3d {
        transform-style: preserve-3d;
        animation: float 4s ease-in-out infinite;
    }
    
    /* Estilos para el modal */
    #method-modal.show {
        opacity: 1;
    }
    
    #method-modal.show > div:last-child {
        transform: scale(1);
        opacity: 1;
    }
</style>

<script>
    // Configuraci√≥n de los m√©todos
    const methods = {
        'simplex': {
            title: 'M√©todo Simplex',
            description: 'El m√©todo simplex es un algoritmo para resolver problemas de programaci√≥n lineal. Explora los v√©rtices de la regi√≥n factible para encontrar la soluci√≥n √≥ptima.',
            formula: 'Maximizar Z = c·µÄx sujeto a Ax ‚â§ b, x ‚â• 0',
            steps: [
                'Convertir el problema a forma est√°ndar',
                'Construir la tabla simplex inicial',
                'Identificar la variable entrante y saliente',
                'Actualizar la tabla mediante operaciones de fila',
                'Repetir hasta alcanzar optimalidad'
            ],
            applications: [
                'Optimizaci√≥n de recursos en empresas',
                'Planificaci√≥n de rutas de transporte',
                'Asignaci√≥n √≥ptima de presupuestos',
                'Mezcla de productos en manufactura'
            ],
            color: 'indigo'
        },
        'falsa-posicion': {
            title: 'M√©todo de Falsa Posici√≥n',
            description: 'El m√©todo de falsa posici√≥n (o regula falsi) es un algoritmo para encontrar ra√≠ces de funciones que combina caracter√≠sticas del m√©todo de bisecci√≥n y del m√©todo de la secante.',
            formula: 'c = (a*f(b) - b*f(a)) / (f(b) - f(a))',
            steps: [
                'Seleccionar dos puntos iniciales a y b tal que f(a)*f(b) < 0',
                'Calcular el punto c usando la f√≥rmula de falsa posici√≥n',
                'Evaluar f(c)',
                'Si f(c) es suficientemente peque√±o, c es la ra√≠z',
                'Si no, reemplazar a o b con c seg√∫n el signo de f(c)',
                'Repetir hasta convergencia'
            ],
            applications: [
                'C√°lculo de puntos de equilibrio en econom√≠a',
                'Determinaci√≥n de tasas de inter√©s impl√≠citas',
                'Soluci√≥n de ecuaciones en ingenier√≠a',
                'An√°lisis de sistemas no lineales'
            ],
            color: 'blue'
        },
        'gauss': {
            title: 'Eliminaci√≥n Gaussiana',
            description: 'La eliminaci√≥n gaussiana es un m√©todo para resolver sistemas de ecuaciones lineales. Consiste en convertir la matriz aumentada del sistema en una forma escalonada mediante operaciones elementales de fila.',
            formula: 'Ax = b ‚Üí Ux = c (donde U es triangular superior)',
            steps: [
                'Escribir la matriz aumentada del sistema',
                'Usar operaciones elementales para obtener una matriz triangular superior',
                'Resolver mediante sustituci√≥n hacia atr√°s'
            ],
            applications: [
                'An√°lisis de circuitos el√©ctricos',
                'Modelado de estructuras en ingenier√≠a civil',
                'Soluci√≥n de problemas de flujo de redes',
                'An√°lisis de sistemas lineales en f√≠sica'
            ],
            color: 'green'
        },
        'gauss-jordan': {
            title: 'M√©todo de Gauss-Jordan',
            description: 'El m√©todo de Gauss-Jordan es una variante de la eliminaci√≥n gaussiana que transforma la matriz aumentada en una forma escalonada reducida, permitiendo leer directamente la soluci√≥n.',
            formula: 'Ax = b ‚Üí Ix = c (donde I es la matriz identidad)',
            steps: [
                'Escribir la matriz aumentada del sistema',
                'Usar operaciones elementales para obtener una matriz diagonal con unos',
                'La soluci√≥n aparece directamente en la √∫ltima columna'
            ],
            applications: [
                'C√°lculo de matrices inversas',
                'Soluci√≥n de sistemas de ecuaciones lineales',
                'An√°lisis de dependencia lineal',
                'Cambios de base en √°lgebra lineal'
            ],
            color: 'cyan'
        },
        'diferenciacion': {
            title: 'Diferenciaci√≥n Finita',
            description: 'La diferenciaci√≥n finita es una t√©cnica num√©rica para aproximar derivadas de funciones usando diferencias entre valores de la funci√≥n en puntos discretos.',
            formulas: [
                'Diferencias hacia adelante: f\'(x) ‚âà (f(x+h) - f(x)) / h',
                'Diferencias hacia atr√°s: f\'(x) ‚âà (f(x) - f(x-h)) / h',
                'Diferencias centradas: f\'(x) ‚âà (f(x+h) - f(x-h)) / (2h)'
            ],
            steps: [
                'Seleccionar el tama√±o de paso h',
                'Aplicar la f√≥rmula de diferencias seleccionada',
                'Evaluar la funci√≥n en los puntos requeridos',
                'Calcular la aproximaci√≥n de la derivada'
            ],
            applications: [
                'Simulaci√≥n de din√°mica de fluidos',
                'An√°lisis de tensiones en estructuras',
                'Modelado de fen√≥menos f√≠sicos',
                'Soluciones num√©ricas de ecuaciones diferenciales'
            ],
            color: 'orange'
        },
        'interpolacion': {
            title: 'Interpolaci√≥n de Newton',
            description: 'La interpolaci√≥n de Newton es un m√©todo para construir un polinomio que pase exactamente por un conjunto de puntos dados, usando diferencias divididas.',
            formula: 'P(x) = f[x0] + f[x0,x1](x-x0) + f[x0,x1,x2](x-x0)(x-x1) + ...',
            steps: [
                'Calcular las diferencias divididas',
                'Construir el polinomio de Newton usando las diferencias',
                'Evaluar el polinomio en los puntos deseados'
            ],
            applications: [
                'Predicci√≥n de valores entre datos conocidos',
                'Reconstrucci√≥n de se√±ales digitales',
                'An√°lisis de tendencias en datos experimentales',
                'Aproximaci√≥n de funciones complejas'
            ],
            color: 'amber'
        }
    };

    // Inicializaci√≥n de Three.js para el fondo de estrellas
    function initStarfield() {
        const container = document.getElementById('stars-container');
        
        // Configuraci√≥n de la escena
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        container.appendChild(renderer.domElement);
        
        // Crear estrellas
        const starsGeometry = new THREE.BufferGeometry();
        const starCount = 2000;
        
        const positions = new Float32Array(starCount * 3);
        const sizes = new Float32Array(starCount);
        const colors = new Float32Array(starCount * 3);
        
        for (let i = 0; i < starCount; i++) {
            // Posiciones aleatorias en un espacio esf√©rico
            const radius = 5 + Math.random() * 20;
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            
            positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
            positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
            positions[i * 3 + 2] = radius * Math.cos(phi);
            
            // Tama√±os aleatorios
            sizes[i] = 0.1 + Math.random() * 0.5;
            
            // Colores aleatorios con tendencia al blanco/azul
            colors[i * 3] = 0.5 + Math.random() * 0.5; // R
            colors[i * 3 + 1] = 0.5 + Math.random() * 0.5; // G
            colors[i * 3 + 2] = 0.7 + Math.random() * 0.3; // B
        }
        
        starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        starsGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        starsGeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
        
        // Material de las estrellas
        const starsMaterial = new THREE.PointsMaterial({
            size: 0.1,
            vertexColors: true,
            transparent: true,
            opacity: 0.8,
            sizeAttenuation: true
        });
        
        const starField = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(starField);
        
        // Configurar c√°mara
        camera.position.z = 5;
        
        // Animaci√≥n
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotaci√≥n lenta de las estrellas
            starField.rotation.x += 0.0001;
            starField.rotation.y += 0.0002;
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Manejo de redimensionamiento
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    }

    // Inicializar modal de m√©todos
    function initMethodModal() {
        const methodCards = document.querySelectorAll('.method-card');
        const modal = document.getElementById('method-modal');
        const modalContent = document.getElementById('modal-content');
        const methodLink = document.getElementById('method-link');
        const closeModal = document.getElementById('close-modal');
        
        methodCards.forEach(card => {
            card.addEventListener('click', () => {
                const method = card.dataset.method;
                const methodData = methods[method];
                
                // Construir contenido del modal
                let content = `
                    <h2 class="text-3xl font-bold mb-6 text-${methodData.color}-400">${methodData.title}</h2>
                    <p class="text-lg mb-6">${methodData.description}</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-semibold mb-4 text-${methodData.color}-300">Pasos del m√©todo:</h3>
                            <ol class="list-decimal pl-5 space-y-2">
                                ${methodData.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                            
                            <h3 class="text-xl font-semibold mt-6 mb-4 text-${methodData.color}-300">F√≥rmula${method === 'diferenciacion' ? 's' : ''}:</h3>
                            ${method === 'diferenciacion' ? 
                                methodData.formulas.map(f => `<div class="bg-gray-700 p-3 rounded mb-2"><code>${f}</code></div>`).join('') : 
                                `<div class="bg-gray-700 p-3 rounded"><code>${methodData.formula}</code></div>`
                            }
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-semibold mb-4 text-${methodData.color}-300">Aplicaciones en la vida real:</h3>
                            <ul class="list-disc pl-5 space-y-2">
                                ${methodData.applications.map(app => `<li>${app}</li>`).join('')}
                            </ul>
                            
                            <div class="mt-6 p-4 bg-gray-700 rounded-lg border-l-4 border-${methodData.color}-500">
                                <h4 class="font-semibold mb-2">¬øSab√≠as que?</h4>
                                <p class="text-sm">${getRandomFact(method)}</p>
                            </div>
                        </div>
                    </div>
                `;
                
                modalContent.innerHTML = content;
                methodLink.href = card.dataset.url;
                
                // Mostrar modal con animaci√≥n
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            });
        });
        
        // Cerrar modal
        closeModal.addEventListener('click', () => {
            modal.classList.remove('show');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        });
    }
    
    // Datos curiosos para cada m√©todo
    function getRandomFact(method) {
        const facts = {
            'simplex': [
                'El m√©todo simplex fue desarrollado por George Dantzig en 1947 y revolucion√≥ la investigaci√≥n de operaciones.',
                'Problemas con miles de variables pueden resolverse eficientemente con el m√©todo simplex.',
                'La NASA ha utilizado el m√©todo simplex para optimizar rutas de misiones espaciales.'
            ],
            'falsa-posicion': [
                'El m√©todo de falsa posici√≥n es uno de los m√°s antiguos, con registros de su uso en papiros egipcios.',
                'Converge m√°s r√°pido que el m√©todo de bisecci√≥n en muchos casos pr√°cticos.',
                'Fue ampliamente usado por astr√≥nomos √°rabes en el siglo IX para c√°lculos celestes.'
            ],
            'gauss': [
                'Carl Friedrich Gauss desarroll√≥ este m√©todo a los 18 a√±os mientras estudiaba √≥rbitas planetarias.',
                'Es el algoritmo m√°s utilizado para resolver sistemas de ecuaciones lineales en computaci√≥n cient√≠fica.',
                'Matrices de hasta millones de variables pueden resolverse con versiones optimizadas de este m√©todo.'
            ],
            'gauss-jordan': [
                'Aunque lleva el nombre de Gauss y Jordan, Wilhelm Jordan fue un top√≥grafo que populariz√≥ el m√©todo.',
                'Es menos eficiente computacionalmente que la eliminaci√≥n gaussiana est√°ndar.',
                'Es ideal para calcular matrices inversas de forma expl√≠cita.'
            ],
            'diferenciacion': [
                'Las diferencias finitas son fundamentales en simulaciones clim√°ticas y de din√°mica de fluidos.',
                'El error en la aproximaci√≥n disminuye con el cuadrado del tama√±o de paso en diferencias centradas.',
                'Se usan en gr√°ficos por computadora para calcular normales y curvaturas en superficies 3D.'
            ],
            'interpolacion': [
                'Newton desarroll√≥ este m√©todo mientras trabajaba en problemas de f√≠sica y astronom√≠a.',
                'El polinomio de Newton es algebraicamente equivalente al de Lagrange, pero m√°s eficiente computacionalmente.',
                'Se usa en GPS para interpolar datos entre sat√©lites y mejorar la precisi√≥n.'
            ]
        };
        
        const methodFacts = facts[method];
        return methodFacts[Math.floor(Math.random() * methodFacts.length)];
    }
    
    // Inicializar chatbot
    function initChatbot() {
        const chatbotUI = document.getElementById('chatbot-ui');
        const openChatbot = document.getElementById('open-chatbot');
        const closeChatbot = document.getElementById('close-chatbot');
        const chatMessages = document.getElementById('chatbot-messages');
        const chatInput = document.getElementById('chatbot-input');
        const sendButton = document.getElementById('send-message');
        
        openChatbot.addEventListener('click', () => {
            chatbotUI.classList.remove('hidden');
            gsap.from(chatbotUI, {
                y: 20,
                opacity: 0,
                duration: 0.3,
                ease: 'power2.out'
            });
        });
        
        closeChatbot.addEventListener('click', () => {
            gsap.to(chatbotUI, {
                y: 20,
                opacity: 0,
                duration: 0.2,
                ease: 'power2.in',
                onComplete: () => chatbotUI.classList.add('hidden')
            });
        });
        
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
            
            const messageContent = document.createElement('div');
            messageContent.className = isUser ? 
                'bg-purple-600 rounded-lg p-3 max-w-xs' : 
                'bg-gray-700 rounded-lg p-3 max-w-xs';
            messageContent.innerHTML = `<p>${text}</p>`;
            
            messageDiv.appendChild(messageContent);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, true);
                chatInput.value = '';
                
                // Respuesta del bot
                setTimeout(() => {
                    addMessage(getBotResponse(message));
                }, 1000);
            }
        }
        
        sendButton.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    }
    
    // Respuestas del chatbot
    function getBotResponse(message) {
        const lowerMsg = message.toLowerCase();
        
        // Detectar m√©todo mencionado
        const methodResponses = {
            'simplex': 'El m√©todo simplex es un algoritmo para resolver problemas de programaci√≥n lineal. ¬øQuieres saber sobre su implementaci√≥n, teor√≠a o ver un ejemplo?',
            'falsa posicion': 'El m√©todo de falsa posici√≥n encuentra ra√≠ces de funciones. Es m√°s eficiente que la bisecci√≥n. ¬øNecesitas ayuda con su f√≥rmula o aplicaci√≥n?',
            'gauss': 'La eliminaci√≥n gaussiana resuelve sistemas de ecuaciones lineales. ¬øTe interesa conocer los pasos o ver c√≥mo usar la calculadora?',
            'gauss jordan': 'Gauss-Jordan transforma matrices a forma escalonada reducida. Es √∫til para calcular inversas. ¬øEn qu√© necesitas ayuda?',
            'diferenciacion finita': 'Diferenciaci√≥n finita aproxima derivadas num√©ricamente. ¬øQuieres saber sobre diferencias hacia adelante, atr√°s o centradas?',
            'interpolacion': 'La interpolaci√≥n de Newton construye polinomios que pasan por puntos dados. ¬øNecesitas ayuda con diferencias divididas o evaluaci√≥n?'
        };
        
        for (const [method, response] of Object.entries(methodResponses)) {
            if (lowerMsg.includes(method)) {
                return response;
            }
        }
        
        // Respuestas generales
        if (lowerMsg.includes('hola') || lowerMsg.includes('hi') || lowerMsg.includes('hello')) {
            return '¬°Hola! Soy el asistente de Ayzex. Puedo explicarte sobre m√©todos num√©ricos como Simplex, Falsa Posici√≥n, Gauss, etc. ¬øEn qu√© necesitas ayuda?';
        }
        
        if (lowerMsg.includes('ayuda') || lowerMsg.includes('help')) {
            return 'Puedo explicarte conceptos de m√©todos num√©ricos, mostrarte ejemplos o guiarte para usar las calculadoras. ¬øQu√© m√©todo te interesa?';
        }
        
        if (lowerMsg.includes('calculadora') || lowerMsg.includes('calculator')) {
            return 'Cada m√©todo tiene su propia calculadora interactiva. Haz clic en "Probar calculadora" en las tarjetas o en los modales para acceder a ellas.';
        }
        
        const randomResponses = [
            'Interesante pregunta. ¬øPodr√≠as especificar a qu√© m√©todo num√©rico te refieres?',
            'No estoy seguro de entender. ¬øPodr√≠as reformular tu pregunta mencionando el m√©todo num√©rico?',
            'Puedo ayudarte con m√©todos como Simplex, Falsa Posici√≥n, Gauss, etc. ¬øCu√°l te interesa?',
            '¬øQuieres saber sobre la teor√≠a, aplicaci√≥n o c√≥mo usar las calculadoras de estos m√©todos?'
        ];
        
        return randomResponses[Math.floor(Math.random() * randomResponses.length)];
    }
    
    // Inicializar todo cuando el DOM est√© listo
    document.addEventListener('DOMContentLoaded', () => {
        initStarfield();
        initMethodModal();
        initChatbot();
        
        // Animaciones adicionales con GSAP
        gsap.from('.method-card', {
            y: 50,
            opacity: 0,
            stagger: 0.1,
            duration: 0.8,
            delay: 0.5,
            ease: 'back.out'
        });
    });
</script>
{% endblock %}